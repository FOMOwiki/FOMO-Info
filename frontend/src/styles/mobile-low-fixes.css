/* ============================================
   MOBILE BUGS FIXES - LOW PRIORITY
   4.5 низких багов + финальная полировка
   ============================================ */

/* ==========================================
   BUG-015: Typography - Fixed px to clamp()
   ========================================== */

/* Adaptive typography using clamp() for fluid scaling */

/* Headings */
h1, .text-5xl, .text-6xl {
  font-size: clamp(2rem, 5vw, 3.75rem) !important;
  line-height: 1.2;
}

h2, .text-4xl, .text-5xl {
  font-size: clamp(1.75rem, 4vw, 3rem) !important;
  line-height: 1.3;
}

h3, .text-3xl, .text-2xl {
  font-size: clamp(1.25rem, 3vw, 1.875rem) !important;
  line-height: 1.4;
}

h4, .text-xl {
  font-size: clamp(1.125rem, 2.5vw, 1.25rem) !important;
}

/* Body text */
p, .text-base {
  font-size: clamp(0.875rem, 2vw, 1rem) !important;
}

.text-lg {
  font-size: clamp(1rem, 2.5vw, 1.125rem) !important;
}

.text-sm {
  font-size: clamp(0.75rem, 1.5vw, 0.875rem) !important;
}

.text-xs {
  font-size: clamp(0.625rem, 1.2vw, 0.75rem) !important;
}

/* Subtitles and descriptions */
.subtitle, [class*="subtitle"] {
  font-size: clamp(1rem, 2.5vw, 1.25rem) !important;
}

/* Button text */
button, .btn, a[role="button"] {
  font-size: clamp(0.875rem, 2vw, 1rem) !important;
}

/* ==========================================
   BUG-017: Touch Targets - Complete Coverage
   ========================================== */

/* Ensure ALL interactive elements meet 44x44px minimum */
@media (max-width: 767px) {
  /* All buttons */
  button,
  [role="button"],
  .btn,
  .button,
  input[type="submit"],
  input[type="button"] {
    min-height: 44px !important;
    min-width: 44px !important;
    padding: 12px 20px !important;
  }
  
  /* All links that look like buttons */
  a.button,
  a.btn,
  a[class*="button"],
  a[class*="btn"] {
    min-height: 44px !important;
    min-width: 44px !important;
    padding: 12px 20px !important;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
  
  /* Navigation items */
  nav a,
  .nav-link,
  [class*="nav"] a {
    min-height: 44px !important;
    padding: 12px 16px !important;
  }
  
  /* Accordion triggers */
  .accordion-trigger,
  .faq-trigger,
  [role="button"][aria-expanded] {
    min-height: 44px !important;
    padding: 16px !important;
  }
  
  /* Tab buttons */
  [role="tab"],
  .tab-button,
  [class*="tab"] button {
    min-height: 44px !important;
    min-width: 44px !important;
    padding: 12px 20px !important;
  }
  
  /* Icon buttons */
  button[class*="icon"],
  .icon-button,
  button svg {
    min-width: 44px !important;
    min-height: 44px !important;
  }
  
  /* Close buttons */
  button[aria-label*="close"],
  button[aria-label*="Close"],
  .close-button {
    min-width: 44px !important;
    min-height: 44px !important;
  }
  
  /* Checkbox and radio labels */
  label[for] {
    min-height: 44px !important;
    padding: 12px !important;
    display: flex;
    align-items: center;
  }
}

/* ==========================================
   BUG-018: Evolution Cards - Adaptive Padding
   ========================================== */

/* Reduce padding on very small screens */
@media (max-width: 374px) {
  .evolution-card,
  .evolution-card-wrapper > div,
  [class*="evolution-card"] {
    padding: 10px !important;
  }
  
  .evolution-card h3,
  .evolution-card .text-lg {
    font-size: 0.9rem !important;
  }
  
  .evolution-card p,
  .evolution-card .text-sm {
    font-size: 0.75rem !important;
  }
}

@media (min-width: 375px) and (max-width: 479px) {
  .evolution-card,
  .evolution-card-wrapper > div {
    padding: 12px !important;
  }
}

/* ==========================================
   BUG-019: Social Icons - Touch-Friendly Size
   ========================================== */

/* Ensure social icons meet 44x44px minimum */
@media (max-width: 767px) {
  .footer-social-icon,
  .social-icon,
  [class*="social"] a,
  [class*="social"] button {
    min-width: 44px !important;
    min-height: 44px !important;
    width: 44px !important;
    height: 44px !important;
  }
  
  /* Increase gap between social icons */
  .footer-social,
  [class*="social-links"],
  [class*="social-icons"] {
    gap: 16px !important;
  }
  
  /* Make sure icons inside are properly sized */
  .footer-social-icon svg,
  .social-icon svg {
    width: 20px !important;
    height: 20px !important;
  }
}

/* ==========================================
   BUG-020: Overflow Hidden - Strategic Fix
   ========================================== */

/* Allow content to be visible on mobile where appropriate */
@media (max-width: 767px) {
  /* Remove overflow hidden from sections that may clip content */
  section[class*="overflow-hidden"],
  .container[class*="overflow-hidden"] {
    overflow: visible !important;
  }
  
  /* Keep overflow hidden only where necessary */
  .carousel,
  .slider,
  [class*="slider"],
  [class*="carousel"] {
    overflow: hidden !important;
  }
  
  /* Allow horizontal scroll where intended */
  .overflow-x-auto,
  [class*="scroll"] {
    overflow-x: auto !important;
    overflow-y: visible !important;
  }
  
  /* Fix for cards that should show shadow */
  .card,
  [class*="card"]:not([class*="slider"]) {
    overflow: visible !important;
  }
}

/* ==========================================
   ADDITIONAL POLISH & IMPROVEMENTS
   ========================================== */

/* Better focus states for accessibility */
@media (max-width: 767px) {
  button:focus,
  a:focus,
  input:focus,
  textarea:focus,
  select:focus {
    outline: 3px solid #10b981 !important;
    outline-offset: 2px !important;
  }
}

/* Improve spacing consistency */
@media (max-width: 479px) {
  /* Consistent section padding */
  section {
    padding-top: clamp(2rem, 8vw, 4rem) !important;
    padding-bottom: clamp(2rem, 8vw, 4rem) !important;
  }
  
  /* Consistent container padding */
  .container,
  .max-w-7xl,
  [class*="max-w-"] {
    padding-left: clamp(1rem, 4vw, 1.5rem) !important;
    padding-right: clamp(1rem, 4vw, 1.5rem) !important;
  }
  
  /* Consistent gap in flex/grid */
  .flex,
  .grid {
    gap: clamp(0.5rem, 2vw, 1rem) !important;
  }
}

/* Better image handling on mobile */
@media (max-width: 767px) {
  img {
    max-width: 100% !important;
    height: auto !important;
  }
  
  /* Prevent images from being too small */
  img[class*="icon"]:not([class*="social"]) {
    min-width: 32px !important;
    min-height: 32px !important;
  }
}

/* Improve form elements on mobile */
@media (max-width: 767px) {
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="tel"],
  textarea,
  select {
    min-height: 44px !important;
    padding: 12px 16px !important;
    font-size: 16px !important; /* Prevents zoom on iOS */
  }
  
  textarea {
    min-height: 120px !important;
  }
}

/* Better modal/dialog handling */
@media (max-width: 767px) {
  [role="dialog"],
  .modal,
  [class*="modal"] {
    max-width: calc(100vw - 32px) !important;
    margin: 16px !important;
  }
  
  .modal-header,
  [class*="modal-header"] {
    padding: 16px !important;
  }
  
  .modal-body,
  [class*="modal-body"] {
    padding: 16px !important;
  }
}

/* Improve table responsiveness */
@media (max-width: 767px) {
  table {
    display: block;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Stack table rows on very small screens */
  @media (max-width: 479px) {
    table,
    thead,
    tbody,
    th,
    td,
    tr {
      display: block;
    }
    
    thead tr {
      position: absolute;
      top: -9999px;
      left: -9999px;
    }
    
    tr {
      margin-bottom: 16px;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 12px;
    }
    
    td {
      border: none;
      position: relative;
      padding-left: 50%;
    }
    
    td:before {
      position: absolute;
      left: 12px;
      width: 45%;
      padding-right: 10px;
      white-space: nowrap;
      font-weight: 600;
    }
  }
}

/* Improve animation performance on mobile */
@media (max-width: 767px) {
  * {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
  
  /* Reduce motion for users who prefer it */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* Better loading states on mobile */
@media (max-width: 767px) {
  .loading,
  [class*="loading"],
  [aria-busy="true"] {
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
}

/* Improve empty states */
@media (max-width: 767px) {
  .empty-state,
  [class*="empty"] {
    padding: 32px 16px !important;
    text-align: center;
  }
}

/* Better error messages */
@media (max-width: 767px) {
  .error,
  [class*="error"],
  [role="alert"] {
    padding: 16px !important;
    font-size: 14px !important;
    border-radius: 8px;
  }
}

/* Sticky elements positioning */
@media (max-width: 767px) {
  .sticky,
  [class*="sticky"] {
    top: 0 !important;
    z-index: 100 !important;
  }
  
  /* Account for mobile browser UI */
  .sticky-bottom {
    bottom: env(safe-area-inset-bottom, 0) !important;
  }
}

/* Safe area insets for notched devices */
@supports (padding: env(safe-area-inset-top)) {
  @media (max-width: 767px) {
    body {
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
    }
  }
}
